#  
#  Copyright (C) 2001 Andrew T. Csillag <drew_csillag@geocities.com>
#  
#      This program is free software; you can redistribute it and/or modify
#      it under the terms of the GNU General Public License as published by
#      the Free Software Foundation; either version 2 of the License, or
#      (at your option) any later version.
#  
#      This program is distributed in the hope that it will be useful,
#      but WITHOUT ANY WARRANTY; without even the implied warranty of
#      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#      GNU General Public License for more details.
#  
#      You should have received a copy of the GNU General Public License
#      along with this program; if not, write to the Free Software
#      Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111, USA.
#   
# $Id: Makefile.in,v 1.9 2003/04/16 20:35:30 smulloni Exp $
# Time-stamp: <01/04/10 13:54:42 smulloni>
# Makefile for pylibs 
########################################################################

#
# Location where to install SkunkWeb
#
prefix          = @prefix@
exec_prefix     = @exec_prefix@
pylibs_dir	= @libdir@/pylibs
skunk_bindir    = @bindir@

# Python components which require cleaning 
py_comps	= signal_plus skunklib uuid AE/cacheKey scopeable

# Exclude from wide file search. Use | to separate entries
exclude	= "CVS|string8859|pargen|skunkdoc"

#
# Who to install as and what modes to set
owner		= @OWNER@
group		= @GROUP@
dirmode		= 0755
confmode	= 0640
execmode	= 0755

# Commands used
INSTALL		= @INSTALL@ -o $(owner) -g $(group)
INSTALL_DATA	= @INSTALL_DATA@ -o $(owner) -g $(group)

default:	build

build:
	@PYTHON@ setup-pylibs build_ext --inplace
	-rm -fR build

# Locate all the files that need installing and install them
install:	
	for file in `find . \( -name '*\.py' -o -name '*\.so' -o -name '*\.sl' -o -name '*\.DLL' -o -name '*\.dll' -o -type d \) -print | egrep -v $(exclude) | sort`; \
	do \
	    if [ -d $${file} ]; \
	    then \
	        $(INSTALL) -d $$DESTDIR$(pylibs_dir)/$${file};\
	    else \
	        $(INSTALL) -m $(execmode) $${file} $$DESTDIR$(pylibs_dir)/$${file}; \
            fi; \
	done

clean:
	@# Clean up the python components
	-for pycomp in $(py_comps); do \
	     rm -f $${pycomp}/*.{so,dll,DLL,sl}; \
        done

distclean: clean
	-rm -f Makefile setup-pylibs

.PHONY:	install build clean default distclean

